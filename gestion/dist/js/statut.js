function affiche(t){"use strict";$.ajax({url:"modeles/ajax/observatoire/statut.php",type:"POST",dataType:"json",data:{sel:t},success:function(t){"Oui"==t.statut?($("#valajax").hide(),$.fn.dataTable.isDataTable("#liste")?(table.destroy(),$("#listestatut").empty(),$("#listestatut").html(t.liste),table=$("#liste").DataTable({language:{url:"../dist/js/datatables/france.json"},order:[],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:1},{orderable:!1,targets:2},{orderable:!1,targets:3}]})):($("#listestatut").html(t.liste),table=$("#liste").DataTable({language:{url:"../dist/js/datatables/france.json"},order:[],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:1},{orderable:!1,targets:2},{orderable:!1,targets:3}]}))):$("#valajax").hide()}})}function modif(t){"use strict";$("#mes").html(""),$.ajax({url:"modeles/ajax/observatoire/statutcherche.php",type:"POST",dataType:"json",data:{id:t},success:function(t){"Oui"==t.statut?($("#type").val(t.lib.type),$("#idstatut").val(t.lib.cdprotect),$("#article").val(t.lib.article),$("#lib").val(t.lib.intitule),$("#ref").val(t.lib.arrete),$("#url").val(t.lib.url),$("#annee").val(t.lib.annee),$("#typeval").val("mod"),$("#ajoutstatut").show(),$("#import").hide(),$("#type").prop("disabled",!0).css("cursor","Not-Allowed"),$("#idstatut").prop("disabled",!0).css("cursor","Not-Allowed")):$("#mes").html(t.mes)}})}function attributionA(t){"use strict";$.ajax({url:"modeles/ajax/observatoire/statutattriba.php",type:"POST",dataType:"json",data:{t:t},success:function(a){$("#idstatut").val(t+a.nb)}})}function sup(t){"use strict";$("#mes").html(""),$.ajax({url:"modeles/ajax/observatoire/statutsup.php",type:"POST",dataType:"json",data:{id:t},success:function(t){if("Oui"==t.statut){var a=$("#choix option:selected").val();affiche(a)}else $("#mes").html(t.mes)}})}function listetaxon(t){"use strict";var a=$("#choix option:selected").val();$.ajax({url:"modeles/ajax/observatoire/statuttaxon.php",type:"POST",dataType:"json",data:{sel:a,id:t},success:function(t){"Oui"==t.statut?($("#listetaxon").html(t.liste),$("html, body").animate({scrollTop:0},"slow")):$("#listetaxon").html("")}})}$(document).ready(function(){"use strict";$("#valajax").hide(),$("#valajax1").hide(),$("#ajoutstatut").hide(),$("#import").hide()});var table;$("#choix").change(function(){"use strict";var t=$("#choix option:selected").val();$("#listetaxon").html(""),"NR"!=t?($("#valajax").show(),affiche(t)):$("#listestatut").html("")}),$("#BttA").click(function(){"use strict";$("#ajoutstatut").show(),$("#typeval").val("ajout"),$("#mes").html(""),$("#import").hide(),$("#type").val("NR"),$("#idstatut").val(""),$("#article").val(""),$("#lib").val(""),$("#ref").val(""),$("#url").val(""),$("#annee").val(""),$("#type").prop("disabled",!1).css("cursor","auto"),$("#idstatut").prop("disabled",!1).css("cursor","auto")}),$("#type").change(function(){"use strict";var t=$("#type option:selected").val();"NR"!=t&&("DH"!=t&&"PN"!=t&&"PR"!=t&&"PD"!=t||$("#idstatut").val(""),"LRE"==t&&$("#idstatut").val("LRE+n°"),"LRF"==t&&$("#idstatut").val("LRF+n°"),"LRR"==t&&$("#idstatut").val("LRR+n°"),"LRD"==t&&$("#idstatut").val("LRD+n°"),"Z"==t&&$("#idstatut").val("Z+n°"),"A"==t&&(attributionA(t),$("#idstatut").val("A+n°")),"I"==t&&(attributionA(t),$("#idstatut").val("I+n°")))}),$("#BttV").click(function(){"use strict";var t=$("#type option:selected").val(),a=$("#idstatut").val(),e=$("#article").val(),s=$("#lib").val(),l=$("#ref").val(),i=$("#url").val(),o=$("#annee").val(),u=$("#typeval").val();"NR"!=t&&($("#valajax").show(),$.ajax({url:"modeles/ajax/observatoire/statutajout.php",type:"POST",dataType:"json",data:{sel:t,id:a,article:e,lib:s,ref:l,url:i,annee:o,typeval:u},success:function(t){if("Oui"==t.statut){$("#valajax").hide(),$("#mes").html(t.mes),$("#ajoutstatut").hide();var a=$("#choix option:selected").val();"NR"!=a&&affiche(a)}else $("#valajax").hide(),$("#mes").html(t.mes)}}))}),$("#listestatut").on("change",".sel",function(){"use strict";var t=$(this).is(":checked")?"oui":"non",a=this.id,e=a.split("-"),s=e[0],l=e[1],i=$("#choix option:selected").val();$.ajax({url:"modeles/ajax/observatoire/statutval.php",type:"POST",dataType:"json",data:{sel:i,id:l,type:s,coche:t},success:function(t){"Oui"!=t.statut&&alert("Erreur ! ")}})}),$("#BttT").click(function(){"use strict";$("#import").show(),$("#mes").html(""),$("#ajoutstatut").hide()}),$("#importtax").on("submit",function(t){"use strict";$("#valajax1").show(),t.preventDefault();var a=$(this),e=window.FormData?new FormData(a[0]):null,s=null!==e?e:a.serialize();$("#valajax1").show(),$.ajax({url:"modeles/ajax/observatoire/statutimport.php",type:"POST",dataType:"json",data:s,contentType:!1,processData:!1,success:function(t){$("#mes").html(t.mes),$("#valajax1").hide()}})});